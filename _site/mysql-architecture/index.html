<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="zh-CN" lang="zh-CN">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="author" content="xyecho" />
    <title>mysql 体系构架</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <link href="/feed/" rel="alternate" title="xyecho" type="application/atom+xml" />
    <link rel="stylesheet" href="/media/css/style.css" />
    <link rel="stylesheet" href="/media/css/highlight.css" />
    <script type="text/javascript" src="/media/js/jquery-1.7.1.min.js"></script>
  </head>
  <body>
    <div id="container">
      <div id="main" role="main">
        <header>
        <h1>mysql 体系构架</h1>
        </header>
        <nav>
        <span><a title="网站首页" class="" href="/">首页</a></span>
        <span><a title="文章分类" class="" href="/categories/">分类</a></span>
        <span><a title="标签索引" class="" href="/tags/">标签</a></span>
        <!--<span><a title="友情链接" class="" href="/links/">链接</a></span>-->
        <span><a title="留言交流" class="" href="/guestbook/">留言</a></span>
        <span><a title="关于站长" class="" href="/about/">关于</a></span>
        <span><a title="种子订阅" class="" href="/feed/" target="_blank">订阅</a></span>
        </nav>
        <article class="content">
        <section class="meta">
<span class="time">
  <time datetime="2015-05-23">2015-05-23</time>
</span>

 | 
<span class="categories">
  分类
  
  <a href="/categories/#db" title="db">db</a>&nbsp;
  
</span>


 | 
<span class="tags">
  标签
  
  <a href="/tags/#mysql" title="mysql">mysql</a>&nbsp;
  
</span>

</section>
<section class="post">
<h1 id="一体系框架">一、体系框架</h1>

<p>mysql 的体系构架划分为：1）网络接入层；2）服务层；3）存储引擎层；4）文件系统。</p>

<p>1、 <strong>网络接入层</strong></p>

<p>提供了应用程序接入 mysql 服务的接口。 客户端与服务端建立连接。</p>

<p>2、<strong>服务层</strong></p>

<p>包含了 <strong>管理工具和服务</strong>、<strong>连接池</strong>、<strong>SQL接口</strong>、<strong>查询解析器</strong>、<strong>查询优化器</strong>、<strong>缓存</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>- 管理工具和服务： 系统管理和控制工具，例如备份恢复、Mysql复制、集群等
- 主要负责连接管理、授权认证、安全等等。
- 接受SQL命令： 验证和解析 SQL命令。
- 查询优化器： SQL语句在查询之前会使用查询优化器对查询进行优化。
- 缓存：查询缓存有命中的查询结果，查询语句就可以直接去查询缓存中取数据。
</code></pre></div></div>

<p>3、<strong>存储引擎层</strong></p>

<p>负责数据的存储和读取，与数据库文件打交道。 服务器中的查询执行引擎通过API与存储引擎进行通信，通过接口屏蔽了不同存储引擎之间的差异。</p>

<p>MySQL采用插件式的存储引擎。MySQL为我们提供了许多存储引擎，每种存储引擎有不同的特点。我们可以根据不同的业务特点，选择最适合的存储引擎。</p>

<p>MySQL区别于其他数据库的最重要的一个特点就是插件式的表存储引擎，注意：存储引擎是基于表的。</p>

<p>4、 <strong>文件系统</strong></p>

<p>主要是将数据库的数据存储在文件系统之上，并完成与存储引擎的交互。</p>

<h1 id="二一个sql语句在mysql中的整体流程">二、一个SQL语句在MySQL中的整体流程</h1>

<p><img src="/assets/db/mysql-2022-09-26_13-52-18.png" alt="" /></p>

<h1 id="三存储引擎">三、存储引擎</h1>

<p>存储引擎主要是通过不同的<strong>存储机制</strong>、<strong>索引技巧</strong>、<strong>锁定水平</strong>提供琐的功能和能力。</p>

<p>MySQL区别于其他数据库的最重要的一个特点就是插件式的表存储引擎，也就是说存储引擎是基于表的。</p>

<p>存储引擎的概念是MySQL里面才有的，不是所有的关系型数据库都有存储引擎这个概念 。其它数据库系统 (包括大多数商业选择)仅支持一种类型的数据存储， 也就是说采用“ 一个尺码满足一切需求 ”的存储方式，也意味着“功能强大，性能平庸”。而MySQL默认配置了许多不同的存储引擎，你可以根据业务需求选取一种最适配最高效的存储引擎。这也是为什么MySQL为何如此受欢迎的主要原因之一。</p>

<h2 id="31-存储引擎分类">3.1 存储引擎分类</h2>

<p>查看当前安装的MySQL版本支持的存储引擎</p>

<pre><code class="language-mysql">-- 查看MySQL版本
select version();

-- 查看版本支持的存储引擎
show engines;
</code></pre>

<p><img src="/assets/db/mysql-2022-10-21_11-27-32.png" alt="" /></p>

<p><strong>10种存储引擎</strong>：</p>

<p>1、MyISAM： 拥有较高的插入，查询速度，但不支持事务。</p>

<p>2、 InnoDB ：5.5.8版本后Mysql的默认数据库引擎，支持ACID事务，支持行级锁定。</p>

<p>3、BDB： 源自Berkeley DB，事务型数据库的另一种选择，支持COMMIT和ROLLBACK等其他事务特性。</p>

<p>4、Memory ：所有数据置于内存的存储引擎，拥有极高的插入，更新和查询效率。但是会占用和数据量成正比的内存空间。并且其内容会在Mysql重新启动时丢失。</p>

<p>5、Merge ：将一定数量的MyISAM表联合而成一个整体，在超大规模数据存储时很有用。</p>

<p>6、Archive ：非常适合存储大量的独立的，作为历史记录的数据。因为它们不经常被读取。Archive拥有高效的插入速度，但其对查询的支持相对较差。</p>

<p>7、Federated： 将不同的Mysql服务器联合起来，逻辑上组成一个完整的数据库。非常适合分布式应用。</p>

<p>8、Cluster/NDB ：高冗余的存储引擎，用多台数据机器联合提供服务以提高整体性能和安全性。适合数据量大，安全和性能要求高的应用。</p>

<p>9、CSV： 逻辑上由逗号分割数据的存储引擎。它会在数据库子目录里为每个数据表创建一个.CSV文件。这是一种普通文本文件，每个数据行占用一个文本行。CSV存储引擎不支持索引。</p>

<p>10、BlackHole ：黑洞引擎，写入的任何数据都会消失，一般用于记录binlog做复制的中继。</p>

<p>这一些引擎的区别可以查看官网：<a href="https://dev.mysql.com/doc/refman/5.7/en/storage-engines.html">Chapter 15 Alternative Storage Engines</a></p>

<p><strong>一般被问的比较的多的是 MyISAM 和 InnoDB 这两种的区别：</strong></p>

<p>1、InnoDB 支持事务，MyISAM 不支持事务。</p>

<p>2、InnoDB 支持外键，而 MyISAM 不支持。</p>

<p>3、InnoDB 不保存表的具体行数，执行 <code class="language-plaintext highlighter-rouge">select count(*) from table</code> 时需要全表扫描。而MyISAM 用一个变量保存了整个表的行数，执行上述语句时只需要读出该变量即可，速度很快。</p>

<p>4、InnoDB 是聚集索引，MyISAM 是非聚集索引。</p>

<p>5、InnoDB 最小的锁粒度是行锁，MyISAM 最小的锁粒度是表锁。</p>

<p>6、InnoDB 更消耗资源，读取速度没有MyISAM快。</p>

<hr />

<p>1、<a href="https://zhuanlan.zhihu.com/p/500250022">MySQL体系构架、存储引擎和索引结构</a></p>

<p>2、<a href="https://www.cnblogs.com/klvchen/articles/12809342.html">MySQL 的基础一(连接池, SQL接口, 查询解析器, 查询优化器, 存储引擎接口, 执行器)</a></p>

<p>3、<a href="https://www.zhihu.com/question/20596402/answer/211492971">Mysql 中 MyISAM 和 InnoDB 的区别有哪些？</a></p>

<p>4、高性能MySQL(第2版)中文版.pdf</p>


</section>
<section align="right">
<br/>
<span>
	<a  href="/mysql-commonly-used/" class="pageNav"  >上一篇</a>
	&nbsp;&nbsp;&nbsp;
	<a  href="/mysql-innodb-engine/" class="pageNav"  >下一篇</a>
</span>
</section>
<!-- JiaThis Button BEGIN -->
<script type="text/javascript">
var jiathis_config = {data_track_clickback:'true'};
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jiathis_r.js?move=0&amp;uid=2121774" charset="utf-8"></script>
<!-- JiaThis Button END -->


	
	<div class="ds-thread" />
		
	<script type="text/javascript">
	var duoshuoQuery = {short_name:"xyecho"};
	(function() {
		var ds = document.createElement('script');
		ds.type = 'text/javascript';ds.async = true;
		ds.src = 'http://static.duoshuo.com/embed.js';
		ds.charset = 'UTF-8';
		(document.getElementsByTagName('head')[0] 
		|| document.getElementsByTagName('body')[0]).appendChild(ds);
	})();
	</script>


<script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fc91691cf4004b194f7847896cca17dbb' type='text/javascript'%3E%3C/script%3E"));
</script>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56673760-1', 'auto');
  ga('send', 'pageview');

</script>

        </article>
      </div>

    <footer>
        <p>
          <script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3Fc91691cf4004b194f7847896cca17dbb' type='text/javascript'%3E%3C/script%3E"));
</script>

          <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-56673760-1', 'auto');
  ga('send', 'pageview');

</script>
        </p>
        <p><small>
            <a href="http://github.com/CarlosFang/CarlosFang.github.io/new/gh-pages/_posts" target="_blank" title="撰写文章">Po</a>wer<a href="http://github.com/CarlosFang/CarlosFang.github.io/edit/gh-pages/_posts/it-note/2015-05-23-mysql-architecture.md" target="_blank" title="编辑页面">ed</a> by <a href="http://jekyllrb.com" target="_blank">Jekyll</a> @ <a href="http://github.com/CarlosFang/CarlosFang.github.io" target="_blank" title="项目主页">GitHub</a>
             | <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/cn/" target="_blank" title="许可协议">©</a> 2014 - 2022 <a href="/about/">xyecho</a>
             | <a href="http://blog.xyecho.com" target="_blank">@cnblogs</a>


         </small></p>
    </footer>

    </div>
  </body>
</html>
